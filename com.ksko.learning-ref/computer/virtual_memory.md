가상 메모리 (Virtual Memory System)
==

리눅스는 하나의 프로세스가 4GB이다. 프로그램의 코드들은 폰노이만 구조에 의해 반드시 메모리에 올라와야하는데, 전부 올라와서 메모리를 쓴다면 비효율적이다. 따라서 코드가 메모리를 쓸 때마다 해당 프로그램을 위해 할당된 메모리를 사용한다. 즉, 여러 프로세스가 메모리를 분할해서 할당받고 사용한다. 이 때 사용하는 것이 **가상 주소**이다. 가상 주소는 프로세스가 참조하는 주소이고, 이 기법으로 실제 메모리보다 많아보이게 한다.

* (컴퓨터가 32 bit를 쓴다면 2의 32승 = 4GB)

가상 주소는 어떻게 사용될까?
--

가상주소를 쓴다면 물리주소로 변환할 수 있어야한다. 이를 MMU(Memory Management Unit)가 담당한다. 그렇다면 어떻게 변환할까?
리눅스같은 경우 프로세스영역을 4kb단위로 잘게 쪼갠다. 이 쪼개진 부분들을 페이지라고 하고, 쪼개는 것을 페이징이라고 한다. 
1. 해당 프로세스가 사용하는 가상주소와 페이지를 페이지 테이블에서 찾고
2. 해당 로우에서 물리주소를 찾은 다음
3. 메모리영역의 물리주소로 찾아간다.
4. 사용이 완료되면 해당 로우는 사라진다.

물리메모리에 존재하는 페이지 테이블은 위의 네 가지를 수행하기 위한 정보를 담고 있다.
1. 가상 주소(위의 1번)
2. 페이지 번호(위의 1번)
3. 물리주소 (위의 3번)
4. 유효 여부(위의 4번)

이 정보들을 빠르게 찾기 위해 관리하는 곳이 바로 CR3 레지스터이다. 